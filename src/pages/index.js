import { useEffect, useState } from 'react';import { supabase } from '../lib/supabaseClient';import Link from 'next/link';import { Container, Card, Button } from '../components/ui';export default function Home(){const [email,setEmail]=useState('');const [session,setSession]=useState(null);useEffect(()=>{supabase.auth.getSession().then(({data})=>setSession(data.session||null));const { data:{ subscription } }=supabase.auth.onAuthStateChange((_e,s)=>setSession(s));return ()=>subscription.unsubscribe()},[]);const signIn=async(e)=>{e.preventDefault();const {error}=await supabase.auth.signInWithOtp({email});if(error)alert(error.message);else alert('이메일로 로그인 링크를 보냈어요.');};const signOut=async()=>{await supabase.auth.signOut()};return(<Container><h1>TOEIC Study</h1>{!session?(<Card><p>아이폰/아이패드 동기화를 위해 이메일 매직 링크 로그인.</p><form onSubmit={signIn}><input type='email' value={email} onChange={e=>setEmail(e.target.value)} placeholder='you@example.com' style={{width:'100%',padding:10,margin:'8px 0'}} required/><Button type='submit'>로그인 링크 보내기</Button></form></Card>):(<><Card><p>로그인됨: {session.user.email}</p><Button onClick={signOut}>로그아웃</Button></Card><Card><h3>학습 시작</h3><ol><li><Link href='/study/day/1'>1일차</Link></li><li><Link href='/study/day/2'>2일차</Link></li><li><Link href='/study/day/3'>3일차</Link></li><li><Link href='/study/day/4'>4일차</Link></li><li><Link href='/study/day/5'>5일차</Link></li><li><Link href='/study/day/6'>6일차</Link></li></ol></Card><Card><h3>SRS</h3><p><Link href='/srs/words'>단어 SRS</Link> · <Link href='/srs/sentences'>문장 SRS</Link></p></Card></>)}</Container>) }